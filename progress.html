<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey with Progress Bar</title>
    <link href="progress.css" rel="stylesheet">
  
</head>
<body>
    <h2>Survey</h2>
    <div class="progress-container" role="progressbar" aria-valuemin="0" aria-valuemax="100">
        <div class="progress-bar" id="progressBar" aria-valuenow="0"></div>
    </div>
    <div class="survey-question" id="questionContainer">
        <p id="questionText">Loading question...</p>
    </div>
    <div class="buttons">
        <button onclick="prevQuestion()" id="prevBtn" disabled>Previous</button>
        <button onclick="nextQuestion()" id="nextBtn">Next</button>
    </div>

    <script>
        const questions = JSON.parse(localStorage.getItem('surveyQuestions') || '[]');
        let currentQuestion = 0;
        
        if (questions.length === 0) {
            window.location.href = 'create-survey.html';
        }
        
        function updateSurvey() {
            document.getElementById("questionText").textContent = questions[currentQuestion];
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            const progressBar = document.getElementById("progressBar");
            progressBar.style.width = progress + "%";
            progressBar.setAttribute("aria-valuenow", Math.round(progress));
            
            document.getElementById("prevBtn").disabled = currentQuestion === 0;
            document.getElementById("nextBtn").textContent = currentQuestion === questions.length - 1 ? "Submit" : "Next";
        }
        
        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                updateSurvey();
            } else {
                alert("Survey submitted!");
            }
        }
        
        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                updateSurvey();
            }
        }
        
        updateSurvey();
    </script>
</body>
</html>
